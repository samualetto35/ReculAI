(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[253],{2435:function(t,e,s){Promise.resolve().then(s.bind(s,339))},339:function(t,e,s){"use strict";s.r(e),s.d(e,{default:function(){return w}});var a=s(7573),i=s(7653),n=s(7930),r=s(1988),o=s(5969),l=s(8146),c=s(1695),u=s(1883),d=s(1990),h=s(3172),m=s(3989),p=s(7354),x=s(5555),f=s(2359),v=s(1359),b=s(1856);let y=(0,s(4313).Z)("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]);var g=s(1569),j=s(5118),N=s(9147);function w(){var t,e,s,w,E,C,S;let{id:D}=(0,c.useParams)(),R=(0,n.NL)(),[M,A]=(0,i.useState)(!1),[T,Z]=(0,i.useState)(null),{data:P,isLoading:I}=(0,r.a)({queryKey:["interview",D],queryFn:async()=>{let{data:t}=await j.pq.get(D);return t}}),O=(0,o.D)({mutationFn:()=>j.pq.update(D,{status:"ACTIVE"}),onSuccess:()=>{R.invalidateQueries({queryKey:["interview",D]})}}),L=t=>{let e="".concat(window.location.origin,"/interview/").concat(t);navigator.clipboard.writeText(e),Z(t),setTimeout(()=>Z(null),2e3)};return I?(0,a.jsx)("div",{className:"p-8",children:(0,a.jsxs)("div",{className:"animate-pulse space-y-4",children:[(0,a.jsx)("div",{className:"h-8 bg-surface-200 rounded w-1/4"}),(0,a.jsx)("div",{className:"h-4 bg-surface-200 rounded w-1/2"})]})}):(0,a.jsxs)("div",{className:"p-8",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsxs)(l.default,{href:"/dashboard/interviews",className:"inline-flex items-center gap-2 text-surface-600 hover:text-white mb-4",children:[(0,a.jsx)(u.Z,{className:"w-4 h-4"}),"M\xfclakatlar"]}),(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-white mb-2",children:null==P?void 0:P.title}),(0,a.jsxs)("div",{className:"flex items-center gap-4 text-surface-600",children:[(0,a.jsxs)("span",{className:(0,N.cn)("px-3 py-1 rounded-full text-xs font-medium","bg-surface-200 text-surface-700"),children:[(0,a.jsx)("span",{className:(0,N.cn)("inline-block w-2 h-2 rounded-full mr-2",(0,N.z2)(null==P?void 0:P.status))}),(0,N.rp)(null==P?void 0:P.status)]}),(0,a.jsxs)("span",{children:[null==P?void 0:null===(t=P.questions)||void 0===t?void 0:t.length," soru"]}),(0,a.jsxs)("span",{children:[null==P?void 0:null===(e=P.candidates)||void 0===e?void 0:e.length," aday"]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(null==P?void 0:P.status)==="DRAFT"&&(0,a.jsxs)("button",{onClick:()=>O.mutate(),className:"btn-primary",children:[(0,a.jsx)(d.Z,{className:"w-4 h-4"}),"Yayınla"]}),(0,a.jsxs)("button",{onClick:()=>A(!0),className:"btn-secondary",children:[(0,a.jsx)(h.Z,{className:"w-4 h-4"}),"Aday Davet Et"]})]})]})]}),(0,a.jsx)("div",{className:"grid grid-cols-4 gap-4 mb-8",children:[{label:"Toplam Aday",value:(null==P?void 0:null===(s=P.candidates)||void 0===s?void 0:s.length)||0,icon:m.Z},{label:"Tamamlanan",value:(null==P?void 0:null===(w=P.candidates)||void 0===w?void 0:w.filter(t=>"COMPLETED"===t.status).length)||0,icon:p.Z},{label:"Bekleyen",value:(null==P?void 0:null===(E=P.candidates)||void 0===E?void 0:E.filter(t=>"INVITED"===t.status).length)||0,icon:x.Z},{label:"Ortalama Puan",value:Math.round((null==P?void 0:null===(C=P.candidates)||void 0===C?void 0:C.reduce((t,e)=>{var s;return t+((null===(s=e.evaluation)||void 0===s?void 0:s.aiScore)||0)},0))/((null==P?void 0:null===(S=P.candidates)||void 0===S?void 0:S.filter(t=>{var e;return null===(e=t.evaluation)||void 0===e?void 0:e.aiScore}).length)||1))||0,icon:f.Z}].map((t,e)=>(0,a.jsx)("div",{className:"card p-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-lg bg-brand-500/10 flex items-center justify-center",children:(0,a.jsx)(t.icon,{className:"w-5 h-5 text-brand-400"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-2xl font-bold text-white",children:t.value}),(0,a.jsx)("p",{className:"text-sm text-surface-600",children:t.label})]})]})},e))}),(0,a.jsxs)("div",{className:"card",children:[(0,a.jsx)("div",{className:"p-6 border-b border-surface-200",children:(0,a.jsx)("h2",{className:"text-lg font-semibold text-white",children:"Adaylar"})}),(null==P?void 0:P.candidates)&&P.candidates.length>0?(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"border-b border-surface-200",children:[(0,a.jsx)("th",{className:"text-left p-4 text-sm font-medium text-surface-600",children:"Aday"}),(0,a.jsx)("th",{className:"text-left p-4 text-sm font-medium text-surface-600",children:"Durum"}),(0,a.jsx)("th",{className:"text-left p-4 text-sm font-medium text-surface-600",children:"AI Puan"}),(0,a.jsx)("th",{className:"text-left p-4 text-sm font-medium text-surface-600",children:"Tarih"}),(0,a.jsx)("th",{className:"text-left p-4 text-sm font-medium text-surface-600",children:"İşlemler"})]})}),(0,a.jsx)("tbody",{children:P.candidates.map(t=>{var e;return(0,a.jsxs)("tr",{className:"border-b border-surface-200 hover:bg-surface-100",children:[(0,a.jsx)("td",{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-full bg-brand-500/20 flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-brand-400 font-medium",children:t.name.charAt(0).toUpperCase()})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-white",children:t.name}),(0,a.jsx)("p",{className:"text-sm text-surface-600",children:t.email})]})]})}),(0,a.jsx)("td",{className:"p-4",children:(0,a.jsxs)("span",{className:(0,N.cn)("px-3 py-1 rounded-full text-xs font-medium","bg-surface-200 text-surface-700"),children:[(0,a.jsx)("span",{className:(0,N.cn)("inline-block w-2 h-2 rounded-full mr-2",(0,N.z2)(t.status))}),(0,N.rp)(t.status)]})}),(0,a.jsx)("td",{className:"p-4",children:(null===(e=t.evaluation)||void 0===e?void 0:e.aiScore)?(0,a.jsxs)("div",{className:(0,N.cn)("inline-flex items-center gap-2 px-3 py-1 rounded-lg border",(0,N.qt)(t.evaluation.aiScore)),children:[(0,a.jsx)(v.Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{className:(0,N.cn)("font-bold",(0,N.Uz)(t.evaluation.aiScore)),children:Math.round(t.evaluation.aiScore)})]}):(0,a.jsx)("span",{className:"text-surface-600",children:"-"})}),(0,a.jsx)("td",{className:"p-4 text-surface-600",children:(0,N.p6)(t.createdAt)}),(0,a.jsx)("td",{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("button",{onClick:()=>L(t.accessToken),className:"p-2 text-surface-600 hover:text-white transition-colors",title:"Linki Kopyala",children:T===t.accessToken?(0,a.jsx)(p.Z,{className:"w-4 h-4 text-green-400"}):(0,a.jsx)(b.Z,{className:"w-4 h-4"})}),"COMPLETED"===t.status&&(0,a.jsx)(l.default,{href:"/dashboard/candidates/".concat(t.id),className:"p-2 text-surface-600 hover:text-white transition-colors",title:"Detayları G\xf6r",children:(0,a.jsx)(y,{className:"w-4 h-4"})})]})})]},t.id)})})]})}):(0,a.jsxs)("div",{className:"p-12 text-center",children:[(0,a.jsx)("div",{className:"w-16 h-16 rounded-2xl bg-surface-200 flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)(m.Z,{className:"w-8 h-8 text-surface-500"})}),(0,a.jsx)("h3",{className:"text-lg font-medium text-white mb-2",children:"Hen\xfcz aday yok"}),(0,a.jsx)("p",{className:"text-surface-600 mb-6",children:"Bu m\xfclakata aday davet edin."}),(0,a.jsxs)("button",{onClick:()=>A(!0),className:"btn-primary",children:[(0,a.jsx)(g.Z,{className:"w-4 h-4"}),"Aday Davet Et"]})]})]}),M&&(0,a.jsx)(k,{interviewId:D,onClose:()=>A(!1),onSuccess:()=>{R.invalidateQueries({queryKey:["interview",D]}),A(!1)}})]})}function k(t){let{interviewId:e,onClose:s,onSuccess:n}=t,[r,o]=(0,i.useState)(""),[l,c]=(0,i.useState)(""),[u,d]=(0,i.useState)(!1),[h,m]=(0,i.useState)(null),p=async t=>{t.preventDefault(),d(!0);try{let{data:t}=await j.hs.invite(e,{email:r,name:l});m({link:t.interviewLink})}catch(t){var s,a;m({error:(null===(a=t.response)||void 0===a?void 0:null===(s=a.data)||void 0===s?void 0:s.message)||"Davet g\xf6nderilemedi"})}finally{d(!1)}};return(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"card w-full max-w-md p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-white mb-6",children:"Aday Davet Et"}),(null==h?void 0:h.link)?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"p-4 bg-green-500/10 border border-green-500/20 rounded-lg",children:[(0,a.jsx)("p",{className:"text-green-400 mb-2",children:"Aday başarıyla davet edildi!"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("input",{type:"text",value:h.link,readOnly:!0,className:"input flex-1 text-sm"}),(0,a.jsx)("button",{onClick:()=>{navigator.clipboard.writeText(h.link)},className:"btn-secondary",children:(0,a.jsx)(b.Z,{className:"w-4 h-4"})})]})]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("button",{onClick:n,className:"btn-primary flex-1",children:"Tamam"}),(0,a.jsx)("button",{onClick:()=>{m(null),o(""),c("")},className:"btn-secondary flex-1",children:"Başka Ekle"})]})]}):(0,a.jsxs)("form",{onSubmit:p,className:"space-y-4",children:[(null==h?void 0:h.error)&&(0,a.jsx)("div",{className:"p-4 bg-red-500/10 border border-red-500/20 rounded-lg text-red-400 text-sm",children:h.error}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-surface-700 mb-2",children:"Ad Soyad"}),(0,a.jsx)("input",{type:"text",value:l,onChange:t=>c(t.target.value),className:"input",placeholder:"Adayın adı soyadı",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-surface-700 mb-2",children:"E-posta"}),(0,a.jsx)("input",{type:"email",value:r,onChange:t=>o(t.target.value),className:"input",placeholder:"aday@email.com",required:!0})]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("button",{type:"button",onClick:s,className:"btn-secondary flex-1",children:"İptal"}),(0,a.jsx)("button",{type:"submit",disabled:u,className:"btn-primary flex-1",children:u?"G\xf6nderiliyor...":"Davet G\xf6nder"})]})]})]})})}},5118:function(t,e,s){"use strict";s.d(e,{LY:function(){return o},aq:function(){return l},hs:function(){return r},iJ:function(){return i},pq:function(){return n}});let a=s(3908).Z.create({baseURL:"".concat("http://localhost:3001","/api"),headers:{"Content-Type":"application/json"}});a.interceptors.request.use(t=>{{let e=localStorage.getItem("token");e&&(t.headers.Authorization="Bearer ".concat(e))}return t}),a.interceptors.response.use(t=>t,t=>{var e;return(null===(e=t.response)||void 0===e?void 0:e.status)===401&&(localStorage.removeItem("token"),window.location.href="https://apprecula.netlify.app/login"),Promise.reject(t)});let i={register:t=>a.post("/auth/register",t),login:t=>a.post("/auth/login",t),me:()=>a.get("/auth/me")},n={list:()=>a.get("/interviews"),get:t=>a.get("/interviews/".concat(t)),create:t=>a.post("/interviews",t),update:(t,e)=>a.put("/interviews/".concat(t),e),delete:t=>a.delete("/interviews/".concat(t)),statistics:()=>a.get("/interviews/statistics")},r={invite:(t,e)=>a.post("/candidates/invite/".concat(t),e),bulkInvite:(t,e)=>a.post("/candidates/bulk-invite/".concat(t),{candidates:e}),list:t=>a.get("/candidates/interview/".concat(t)),get:t=>a.get("/candidates/".concat(t)),updateStatus:(t,e)=>a.put("/candidates/".concat(t,"/status"),{status:e}),updateEvaluation:(t,e)=>a.put("/candidates/".concat(t,"/evaluation"),e)},o={getInterview:t=>a.get("/public/interview/".concat(t)),startInterview:(t,e)=>a.post("/public/interview/".concat(t,"/start"),{deviceInfo:e}),completeInterview:t=>a.post("/public/interview/".concat(t,"/complete")),submitResponse:(t,e,s)=>a.post("/public/responses/".concat(t,"/").concat(e),s),reportBehavior:(t,e)=>a.post("/public/interview/".concat(t,"/suspicious-behavior"),e)},l={getPresignedUrl:t=>a.post("/upload/presigned-url",t)}},9147:function(t,e,s){"use strict";s.d(e,{LU:function(){return r},Uz:function(){return l},cn:function(){return n},p6:function(){return o},qt:function(){return c},rp:function(){return d},xR:function(){return h},z2:function(){return u}});var a=s(607),i=s(5579);function n(){for(var t=arguments.length,e=Array(t),s=0;s<t;s++)e[s]=arguments[s];return(0,i.m6)((0,a.W)(e))}function r(t){return"".concat(Math.floor(t/60).toString().padStart(2,"0"),":").concat(Math.floor(t%60).toString().padStart(2,"0"))}function o(t){return new Intl.DateTimeFormat("tr-TR",{day:"numeric",month:"long",year:"numeric"}).format(new Date(t))}function l(t){return t>=80?"text-green-400":t>=60?"text-yellow-400":t>=40?"text-orange-400":"text-red-400"}function c(t){return t>=80?"bg-green-500/10 border-green-500/20":t>=60?"bg-yellow-500/10 border-yellow-500/20":t>=40?"bg-orange-500/10 border-orange-500/20":"bg-red-500/10 border-red-500/20"}function u(t){return({DRAFT:"bg-surface-400",ACTIVE:"bg-green-500",PAUSED:"bg-yellow-500",CLOSED:"bg-red-500",ARCHIVED:"bg-surface-500",INVITED:"bg-blue-500",STARTED:"bg-yellow-500",IN_PROGRESS:"bg-orange-500",COMPLETED:"bg-green-500",EXPIRED:"bg-red-500",DISQUALIFIED:"bg-red-500"})[t]||"bg-surface-400"}function d(t){return({DRAFT:"Taslak",ACTIVE:"Aktif",PAUSED:"Duraklatıldı",CLOSED:"Kapatıldı",ARCHIVED:"Arşivlendi",INVITED:"Davet Edildi",STARTED:"Başladı",IN_PROGRESS:"Devam Ediyor",COMPLETED:"Tamamlandı",EXPIRED:"S\xfcresi Doldu",DISQUALIFIED:"Diskalifiye",PENDING:"Beklemede",SHORTLISTED:"Kısa Liste",REJECTED:"Reddedildi",HIRED:"İşe Alındı"})[t]||t}async function h(t,e,s){return new Promise((a,i)=>{let n=new XMLHttpRequest;n.upload.addEventListener("progress",t=>{t.lengthComputable&&s&&s(Math.round(t.loaded/t.total*100))}),n.addEventListener("load",()=>{n.status>=200&&n.status<300?a():i(Error("Upload failed with status ".concat(n.status)))}),n.addEventListener("error",()=>{i(Error("Upload failed"))}),n.open("PUT",t),n.setRequestHeader("Content-Type",e.type),n.send(e)})}},1883:function(t,e,s){"use strict";s.d(e,{Z:function(){return a}});let a=(0,s(4313).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},1359:function(t,e,s){"use strict";s.d(e,{Z:function(){return a}});let a=(0,s(4313).Z)("Brain",[["path",{d:"M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z",key:"1mhkh5"}],["path",{d:"M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z",key:"1d6s00"}]])},7354:function(t,e,s){"use strict";s.d(e,{Z:function(){return a}});let a=(0,s(4313).Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},5555:function(t,e,s){"use strict";s.d(e,{Z:function(){return a}});let a=(0,s(4313).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},1856:function(t,e,s){"use strict";s.d(e,{Z:function(){return a}});let a=(0,s(4313).Z)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]])},1569:function(t,e,s){"use strict";s.d(e,{Z:function(){return a}});let a=(0,s(4313).Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},1990:function(t,e,s){"use strict";s.d(e,{Z:function(){return a}});let a=(0,s(4313).Z)("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]])},3172:function(t,e,s){"use strict";s.d(e,{Z:function(){return a}});let a=(0,s(4313).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},2359:function(t,e,s){"use strict";s.d(e,{Z:function(){return a}});let a=(0,s(4313).Z)("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]])},3989:function(t,e,s){"use strict";s.d(e,{Z:function(){return a}});let a=(0,s(4313).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},1695:function(t,e,s){"use strict";var a=s(1219);s.o(a,"useParams")&&s.d(e,{useParams:function(){return a.useParams}}),s.o(a,"usePathname")&&s.d(e,{usePathname:function(){return a.usePathname}}),s.o(a,"useRouter")&&s.d(e,{useRouter:function(){return a.useRouter}})},4855:function(t,e,s){"use strict";s.d(e,{R:function(){return o},m:function(){return r}});var a=s(2906),i=s(5531),n=s(1135),r=class extends i.F{#t;#e;#s;#a;constructor(t){super(),this.#t=t.client,this.mutationId=t.mutationId,this.#s=t.mutationCache,this.#e=[],this.state=t.state||o(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){this.#e.includes(t)||(this.#e.push(t),this.clearGcTimeout(),this.#s.notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){this.#e=this.#e.filter(e=>e!==t),this.scheduleGc(),this.#s.notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){this.#e.length||("pending"===this.state.status?this.scheduleGc():this.#s.remove(this))}continue(){return this.#a?.continue()??this.execute(this.state.variables)}async execute(t){let e=()=>{this.#i({type:"continue"})},s={client:this.#t,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#a=(0,n.Mz)({fn:()=>this.options.mutationFn?this.options.mutationFn(t,s):Promise.reject(Error("No mutationFn found")),onFail:(t,e)=>{this.#i({type:"failed",failureCount:t,error:e})},onPause:()=>{this.#i({type:"pause"})},onContinue:e,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#s.canRun(this)});let a="pending"===this.state.status,i=!this.#a.canStart();try{if(a)e();else{this.#i({type:"pending",variables:t,isPaused:i}),await this.#s.config.onMutate?.(t,this,s);let e=await this.options.onMutate?.(t,s);e!==this.state.context&&this.#i({type:"pending",context:e,variables:t,isPaused:i})}let n=await this.#a.start();return await this.#s.config.onSuccess?.(n,t,this.state.context,this,s),await this.options.onSuccess?.(n,t,this.state.context,s),await this.#s.config.onSettled?.(n,null,this.state.variables,this.state.context,this,s),await this.options.onSettled?.(n,null,t,this.state.context,s),this.#i({type:"success",data:n}),n}catch(e){try{throw await this.#s.config.onError?.(e,t,this.state.context,this,s),await this.options.onError?.(e,t,this.state.context,s),await this.#s.config.onSettled?.(void 0,e,this.state.variables,this.state.context,this,s),await this.options.onSettled?.(void 0,e,t,this.state.context,s),e}finally{this.#i({type:"error",error:e})}}finally{this.#s.runNext(this)}}#i(t){this.state=(e=>{switch(t.type){case"failed":return{...e,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...e,isPaused:!0};case"continue":return{...e,isPaused:!1};case"pending":return{...e,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...e,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...e,data:void 0,error:t.error,failureCount:e.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}})(this.state),a.Vr.batch(()=>{this.#e.forEach(e=>{e.onMutationUpdate(t)}),this.#s.notify({mutation:this,type:"updated",action:t})})}};function o(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}},5969:function(t,e,s){"use strict";s.d(e,{D:function(){return u}});var a=s(7653),i=s(4855),n=s(2906),r=s(4559),o=s(803),l=class extends r.l{#t;#n=void 0;#r;#o;constructor(t,e){super(),this.#t=t,this.setOptions(e),this.bindMethods(),this.#l()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){let e=this.options;this.options=this.#t.defaultMutationOptions(t),(0,o.VS)(this.options,e)||this.#t.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#r,observer:this}),e?.mutationKey&&this.options.mutationKey&&(0,o.Ym)(e.mutationKey)!==(0,o.Ym)(this.options.mutationKey)?this.reset():this.#r?.state.status==="pending"&&this.#r.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#r?.removeObserver(this)}onMutationUpdate(t){this.#l(),this.#c(t)}getCurrentResult(){return this.#n}reset(){this.#r?.removeObserver(this),this.#r=void 0,this.#l(),this.#c()}mutate(t,e){return this.#o=e,this.#r?.removeObserver(this),this.#r=this.#t.getMutationCache().build(this.#t,this.options),this.#r.addObserver(this),this.#r.execute(t)}#l(){let t=this.#r?.state??(0,i.R)();this.#n={...t,isPending:"pending"===t.status,isSuccess:"success"===t.status,isError:"error"===t.status,isIdle:"idle"===t.status,mutate:this.mutate,reset:this.reset}}#c(t){n.Vr.batch(()=>{if(this.#o&&this.hasListeners()){let e=this.#n.variables,s=this.#n.context,a={client:this.#t,meta:this.options.meta,mutationKey:this.options.mutationKey};t?.type==="success"?(this.#o.onSuccess?.(t.data,e,s,a),this.#o.onSettled?.(t.data,null,e,s,a)):t?.type==="error"&&(this.#o.onError?.(t.error,e,s,a),this.#o.onSettled?.(void 0,t.error,e,s,a))}this.listeners.forEach(t=>{t(this.#n)})})}},c=s(7930);function u(t,e){let s=(0,c.NL)(e),[i]=a.useState(()=>new l(s,t));a.useEffect(()=>{i.setOptions(t)},[i,t]);let r=a.useSyncExternalStore(a.useCallback(t=>i.subscribe(n.Vr.batchCalls(t)),[i]),()=>i.getCurrentResult(),()=>i.getCurrentResult()),u=a.useCallback((t,e)=>{i.mutate(t,e).catch(o.ZT)},[i]);if(r.error&&(0,o.L3)(i.options.throwOnError,[r.error]))throw r.error;return{...r,mutate:u,mutateAsync:r.mutate}}}},function(t){t.O(0,[9697,1661,9976,3908,1988,1293,1528,1744],function(){return t(t.s=2435)}),_N_E=t.O()}]);