(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[267],{6538:function(e,s,t){Promise.resolve().then(t.bind(t,846))},846:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return D}});var a=t(7573),n=t(7653),r=t(7930),i=t(1988),l=t(5969),c=t(1695),d=t(8146),o=t(1883),u=t(1359),m=t(3362),x=t(5653),h=t(1990),p=t(2377),v=t(2009),f=t(3332),g=t(6673),b=t(2966),j=t(2482),N=t(1095),w=t(2439),y=t(5155),E=t(4105),S=t(5118),k=t(9147);function D(){var e,s,t,D,T,I,C,L;let{id:R}=(0,c.useParams)(),A=(0,r.NL)(),U=(0,n.useRef)(null),[Z,P]=(0,n.useState)(0),[q,O]=(0,n.useState)(!1),[z,F]=(0,n.useState)(0),[H,M]=(0,n.useState)(0),[_,B]=(0,n.useState)(!1),[G,V]=(0,n.useState)(!0),{data:J,isLoading:K}=(0,i.a)({queryKey:["candidate",R],queryFn:async()=>{let{data:e}=await S.hs.get(R);return e}}),X=(0,l.D)({mutationFn:e=>S.hs.updateEvaluation(R,e),onSuccess:()=>{A.invalidateQueries({queryKey:["candidate",R]})}}),Q=null==J?void 0:null===(e=J.responses)||void 0===e?void 0:e[Z],Y=null==Q?void 0:Q.analysis,W=null==Q?void 0:Q.transcription;(0,n.useEffect)(()=>{let e=U.current;if(!e)return;let s=()=>F(e.currentTime),t=()=>M(e.duration),a=()=>O(!0),n=()=>O(!1);return e.addEventListener("timeupdate",s),e.addEventListener("durationchange",t),e.addEventListener("play",a),e.addEventListener("pause",n),()=>{e.removeEventListener("timeupdate",s),e.removeEventListener("durationchange",t),e.removeEventListener("play",a),e.removeEventListener("pause",n)}},[Z]);let $=()=>{U.current&&(q?U.current.pause():U.current.play())},ee=e=>{U.current&&(U.current.currentTime=e)},es=e=>{X.mutate({decision:e})};if(K)return(0,a.jsx)("div",{className:"p-8",children:(0,a.jsxs)("div",{className:"animate-pulse space-y-4",children:[(0,a.jsx)("div",{className:"h-8 bg-surface-200 rounded w-1/4"}),(0,a.jsx)("div",{className:"h-96 bg-surface-200 rounded"})]})});let et=(null==Y?void 0:Y.highlights)||[],ea=(null==Y?void 0:Y.competencies)||[],en=(null==Y?void 0:Y.redFlags)||[],er=(null==W?void 0:W.segments)||[];return(0,a.jsxs)("div",{className:"min-h-screen bg-surface-0",children:[(0,a.jsx)("div",{className:"border-b border-surface-200 bg-surface-50/80 backdrop-blur-xl sticky top-0 z-50",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-6 py-4",children:[(0,a.jsxs)(d.default,{href:"/dashboard/interviews/".concat(null==J?void 0:null===(s=J.interview)||void 0===s?void 0:s.id),className:"inline-flex items-center gap-2 text-surface-600 hover:text-white mb-4",children:[(0,a.jsx)(o.Z,{className:"w-4 h-4"}),"Geri"]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"w-14 h-14 rounded-full bg-brand-500/20 flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-xl font-bold text-brand-400",children:null==J?void 0:null===(t=J.name)||void 0===t?void 0:t.charAt(0).toUpperCase()})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-xl font-bold text-white",children:null==J?void 0:J.name}),(0,a.jsx)("p",{className:"text-surface-600",children:null==J?void 0:J.email})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(null==J?void 0:null===(D=J.evaluation)||void 0===D?void 0:D.aiScore)&&(0,a.jsxs)("div",{className:(0,k.cn)("flex items-center gap-2 px-4 py-2 rounded-xl border",(0,k.qt)(J.evaluation.aiScore)),children:[(0,a.jsx)(u.Z,{className:"w-5 h-5"}),(0,a.jsx)("span",{className:(0,k.cn)("text-xl font-bold",(0,k.Uz)(J.evaluation.aiScore)),children:Math.round(J.evaluation.aiScore)}),(0,a.jsx)("span",{className:"text-surface-600",children:"/100"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("button",{onClick:()=>es("REJECTED"),className:(0,k.cn)("p-3 rounded-xl transition-colors",(null==J?void 0:null===(T=J.evaluation)||void 0===T?void 0:T.decision)==="REJECTED"?"bg-red-500 text-white":"bg-surface-200 text-surface-600 hover:bg-red-500/20 hover:text-red-400"),children:(0,a.jsx)(m.Z,{className:"w-5 h-5"})}),(0,a.jsx)("button",{onClick:()=>es("SHORTLISTED"),className:(0,k.cn)("p-3 rounded-xl transition-colors",(null==J?void 0:null===(I=J.evaluation)||void 0===I?void 0:I.decision)==="SHORTLISTED"?"bg-green-500 text-white":"bg-surface-200 text-surface-600 hover:bg-green-500/20 hover:text-green-400"),children:(0,a.jsx)(x.Z,{className:"w-5 h-5"})})]})]})]})]})}),(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-6 py-8",children:(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-8",children:[(0,a.jsxs)("div",{className:"col-span-2 space-y-6",children:[(0,a.jsx)("div",{className:"flex items-center gap-2 overflow-x-auto pb-2",children:null==J?void 0:null===(C=J.responses)||void 0===C?void 0:C.map((e,s)=>{var t;return(0,a.jsxs)("button",{onClick:()=>P(s),className:(0,k.cn)("flex-shrink-0 px-4 py-2 rounded-lg text-sm font-medium transition-colors",Z===s?"bg-brand-500 text-white":"bg-surface-200 text-surface-600 hover:bg-surface-300"),children:["Soru ",s+1,(null===(t=e.analysis)||void 0===t?void 0:t.overallScore)&&(0,a.jsxs)("span",{className:(0,k.cn)("ml-2",(0,k.Uz)(e.analysis.overallScore)),children:["(",Math.round(e.analysis.overallScore),")"]})]},e.id)})}),(0,a.jsx)("div",{className:"card p-4",children:(0,a.jsx)("p",{className:"text-white font-medium",children:null==Q?void 0:null===(L=Q.question)||void 0===L?void 0:L.text})}),(0,a.jsxs)("div",{className:"card overflow-hidden",children:[(0,a.jsxs)("div",{className:"relative bg-black aspect-video",children:[(0,a.jsx)("video",{ref:U,src:null==Q?void 0:Q.videoUrl,className:"w-full h-full object-contain",onClick:$}),!q&&(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,a.jsx)("button",{onClick:$,className:"w-20 h-20 rounded-full bg-white/20 backdrop-blur-sm flex items-center justify-center hover:bg-white/30 transition-colors",children:(0,a.jsx)(h.Z,{className:"w-10 h-10 text-white ml-1"})})})]}),(0,a.jsxs)("div",{className:"p-4 space-y-3",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"h-2 bg-surface-200 rounded-full cursor-pointer",onClick:e=>{let s=e.currentTarget.getBoundingClientRect();ee((e.clientX-s.left)/s.width*H)},children:(0,a.jsx)("div",{className:"h-2 bg-brand-500 rounded-full",style:{width:"".concat(z/H*100,"%")}})}),et.map((e,s)=>(0,a.jsx)("button",{onClick:()=>ee(e.timestamp),className:(0,k.cn)("absolute top-1/2 -translate-y-1/2 w-3 h-3 rounded-full border-2 border-surface-0","positive"===e.type?"bg-green-500":"negative"===e.type?"bg-red-500":"bg-yellow-500"),style:{left:"".concat(e.timestamp/H*100,"%")},title:e.reason},s))]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("button",{onClick:$,className:"p-2 text-surface-600 hover:text-white transition-colors",children:q?(0,a.jsx)(p.Z,{className:"w-5 h-5"}):(0,a.jsx)(h.Z,{className:"w-5 h-5"})}),(0,a.jsx)("button",{onClick:()=>B(!_),className:"p-2 text-surface-600 hover:text-white transition-colors",children:_?(0,a.jsx)(v.Z,{className:"w-5 h-5"}):(0,a.jsx)(f.Z,{className:"w-5 h-5"})}),(0,a.jsxs)("span",{className:"text-sm text-surface-600 tabular-nums",children:[(0,k.LU)(z)," / ",(0,k.LU)(H)]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4 text-xs text-surface-600",children:[(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full bg-green-500"}),"G\xfc\xe7l\xfc"]}),(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full bg-yellow-500"}),"Dikkat"]}),(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full bg-red-500"}),"Zayıf"]})]})]})]})]}),W&&(0,a.jsxs)("div",{className:"card",children:[(0,a.jsxs)("button",{onClick:()=>V(!G),className:"w-full p-4 flex items-center justify-between hover:bg-surface-100 transition-colors",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(g.Z,{className:"w-5 h-5 text-brand-400"}),(0,a.jsx)("span",{className:"font-medium text-white",children:"Transkript"})]}),(0,a.jsx)(b.Z,{className:(0,k.cn)("w-5 h-5 text-surface-600 transition-transform",G&&"rotate-90")})]}),G&&(0,a.jsx)("div",{className:"p-4 pt-0 space-y-2 max-h-64 overflow-y-auto",children:er.map((e,s)=>(0,a.jsxs)("button",{onClick:()=>ee(e.start),className:"block w-full text-left p-2 rounded-lg hover:bg-surface-100 transition-colors group",children:[(0,a.jsxs)("span",{className:"text-xs text-brand-400 group-hover:text-brand-300",children:["[",(0,k.LU)(e.start),"]"]}),(0,a.jsx)("span",{className:"ml-2 text-surface-700 group-hover:text-white",children:e.text})]},s))})]})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(null==Y?void 0:Y.summary)&&(0,a.jsxs)("div",{className:"card p-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,a.jsx)(j.Z,{className:"w-5 h-5 text-brand-400"}),(0,a.jsx)("h3",{className:"font-medium text-white",children:"AI \xd6zeti"})]}),(0,a.jsx)("p",{className:"text-surface-600 text-sm leading-relaxed",children:Y.summary})]}),ea.length>0&&(0,a.jsxs)("div",{className:"card p-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,a.jsx)(N.Z,{className:"w-5 h-5 text-brand-400"}),(0,a.jsx)("h3",{className:"font-medium text-white",children:"Yetkinlikler"})]}),(0,a.jsx)("div",{className:"space-y-3",children:ea.map((e,s)=>(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-surface-700",children:e.name}),(0,a.jsxs)("span",{className:(0,k.cn)("font-medium",(0,k.Uz)(e.score/e.maxScore*100)),children:[e.score,"/",e.maxScore]})]}),(0,a.jsx)("div",{className:"h-2 bg-surface-200 rounded-full",children:(0,a.jsx)("div",{className:(0,k.cn)("h-2 rounded-full",e.score/e.maxScore>=.8?"bg-green-500":e.score/e.maxScore>=.6?"bg-yellow-500":"bg-red-500"),style:{width:"".concat(e.score/e.maxScore*100,"%")}})}),e.evidence&&(0,a.jsxs)("p",{className:"text-xs text-surface-600 mt-1",children:['"',e.evidence,'"']})]},s))})]}),(null==Y?void 0:Y.starAnalysis)&&(0,a.jsxs)("div",{className:"card p-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,a.jsx)(w.Z,{className:"w-5 h-5 text-brand-400"}),(0,a.jsx)("h3",{className:"font-medium text-white",children:"STAR Analizi"}),(0,a.jsxs)("span",{className:(0,k.cn)("ml-auto text-sm font-medium",(0,k.Uz)(Y.starAnalysis.score)),children:[Y.starAnalysis.score,"%"]})]}),(0,a.jsx)("div",{className:"space-y-3 text-sm",children:["situation","task","action","result"].map(e=>(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-brand-400 font-medium uppercase text-xs",children:e.charAt(0)}),(0,a.jsx)("span",{className:"text-surface-700 ml-2",children:Y.starAnalysis[e]||"Belirlenmedi"})]},e))})]}),en.length>0&&(0,a.jsxs)("div",{className:"card p-4 border-red-500/20",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,a.jsx)(y.Z,{className:"w-5 h-5 text-red-400"}),(0,a.jsx)("h3",{className:"font-medium text-red-400",children:"Dikkat Noktaları"})]}),(0,a.jsx)("div",{className:"space-y-2",children:en.map((e,s)=>(0,a.jsxs)("div",{className:(0,k.cn)("p-3 rounded-lg text-sm","high"===e.severity?"bg-red-500/10 text-red-400":"medium"===e.severity?"bg-yellow-500/10 text-yellow-400":"bg-surface-200 text-surface-600"),children:[(0,a.jsxs)("span",{className:"font-medium",children:[e.type,":"]})," ",e.description]},s))})]}),et.length>0&&(0,a.jsxs)("div",{className:"card p-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,a.jsx)(E.Z,{className:"w-5 h-5 text-brand-400"}),(0,a.jsx)("h3",{className:"font-medium text-white",children:"\xd6nemli Anlar"})]}),(0,a.jsx)("div",{className:"space-y-2",children:et.map((e,s)=>(0,a.jsxs)("button",{onClick:()=>ee(e.timestamp),className:(0,k.cn)("w-full p-3 rounded-lg text-left text-sm transition-colors hover:ring-2 ring-brand-500/50","positive"===e.type?"bg-green-500/10":"negative"===e.type?"bg-red-500/10":"bg-yellow-500/10"),children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,a.jsxs)("span",{className:"text-xs text-brand-400 font-mono",children:["[",(0,k.LU)(e.timestamp),"]"]}),(0,a.jsx)("span",{className:(0,k.cn)("text-xs font-medium","positive"===e.type?"text-green-400":"negative"===e.type?"text-red-400":"text-yellow-400"),children:"positive"===e.type?"G\xfc\xe7l\xfc":"negative"===e.type?"Zayıf":"Dikkat"})]}),(0,a.jsx)("p",{className:"text-surface-700",children:e.text}),(0,a.jsx)("p",{className:"text-xs text-surface-600 mt-1",children:e.reason})]},s))})]})]})]})})]})}},5118:function(e,s,t){"use strict";t.d(s,{LY:function(){return l},aq:function(){return c},hs:function(){return i},iJ:function(){return n},pq:function(){return r}});let a=t(3908).Z.create({baseURL:"".concat("http://localhost:3001","/api"),headers:{"Content-Type":"application/json"}});a.interceptors.request.use(e=>{{let s=localStorage.getItem("token");s&&(e.headers.Authorization="Bearer ".concat(s))}return e}),a.interceptors.response.use(e=>e,e=>{var s;return(null===(s=e.response)||void 0===s?void 0:s.status)===401&&(localStorage.removeItem("token"),window.location.href="/auth/login"),Promise.reject(e)});let n={register:e=>a.post("/auth/register",e),login:e=>a.post("/auth/login",e),me:()=>a.get("/auth/me")},r={list:()=>a.get("/interviews"),get:e=>a.get("/interviews/".concat(e)),create:e=>a.post("/interviews",e),update:(e,s)=>a.put("/interviews/".concat(e),s),delete:e=>a.delete("/interviews/".concat(e)),statistics:()=>a.get("/interviews/statistics")},i={invite:(e,s)=>a.post("/candidates/invite/".concat(e),s),bulkInvite:(e,s)=>a.post("/candidates/bulk-invite/".concat(e),{candidates:s}),list:e=>a.get("/candidates/interview/".concat(e)),get:e=>a.get("/candidates/".concat(e)),updateStatus:(e,s)=>a.put("/candidates/".concat(e,"/status"),{status:s}),updateEvaluation:(e,s)=>a.put("/candidates/".concat(e,"/evaluation"),s)},l={getInterview:e=>a.get("/public/interview/".concat(e)),startInterview:(e,s)=>a.post("/public/interview/".concat(e,"/start"),{deviceInfo:s}),completeInterview:e=>a.post("/public/interview/".concat(e,"/complete")),submitResponse:(e,s,t)=>a.post("/public/responses/".concat(e,"/").concat(s),t),reportBehavior:(e,s)=>a.post("/public/interview/".concat(e,"/suspicious-behavior"),s)},c={getPresignedUrl:e=>a.post("/upload/presigned-url",e)}},9147:function(e,s,t){"use strict";t.d(s,{LU:function(){return i},Uz:function(){return c},cn:function(){return r},p6:function(){return l},qt:function(){return d},rp:function(){return u},xR:function(){return m},z2:function(){return o}});var a=t(607),n=t(5579);function r(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,n.m6)((0,a.W)(s))}function i(e){return"".concat(Math.floor(e/60).toString().padStart(2,"0"),":").concat(Math.floor(e%60).toString().padStart(2,"0"))}function l(e){return new Intl.DateTimeFormat("tr-TR",{day:"numeric",month:"long",year:"numeric"}).format(new Date(e))}function c(e){return e>=80?"text-green-400":e>=60?"text-yellow-400":e>=40?"text-orange-400":"text-red-400"}function d(e){return e>=80?"bg-green-500/10 border-green-500/20":e>=60?"bg-yellow-500/10 border-yellow-500/20":e>=40?"bg-orange-500/10 border-orange-500/20":"bg-red-500/10 border-red-500/20"}function o(e){return({DRAFT:"bg-surface-400",ACTIVE:"bg-green-500",PAUSED:"bg-yellow-500",CLOSED:"bg-red-500",ARCHIVED:"bg-surface-500",INVITED:"bg-blue-500",STARTED:"bg-yellow-500",IN_PROGRESS:"bg-orange-500",COMPLETED:"bg-green-500",EXPIRED:"bg-red-500",DISQUALIFIED:"bg-red-500"})[e]||"bg-surface-400"}function u(e){return({DRAFT:"Taslak",ACTIVE:"Aktif",PAUSED:"Duraklatıldı",CLOSED:"Kapatıldı",ARCHIVED:"Arşivlendi",INVITED:"Davet Edildi",STARTED:"Başladı",IN_PROGRESS:"Devam Ediyor",COMPLETED:"Tamamlandı",EXPIRED:"S\xfcresi Doldu",DISQUALIFIED:"Diskalifiye",PENDING:"Beklemede",SHORTLISTED:"Kısa Liste",REJECTED:"Reddedildi",HIRED:"İşe Alındı"})[e]||e}async function m(e,s,t){return new Promise((a,n)=>{let r=new XMLHttpRequest;r.upload.addEventListener("progress",e=>{e.lengthComputable&&t&&t(Math.round(e.loaded/e.total*100))}),r.addEventListener("load",()=>{r.status>=200&&r.status<300?a():n(Error("Upload failed with status ".concat(r.status)))}),r.addEventListener("error",()=>{n(Error("Upload failed"))}),r.open("PUT",e),r.setRequestHeader("Content-Type",s.type),r.send(s)})}}},function(e){e.O(0,[697,661,976,908,988,345,293,528,744],function(){return e(e.s=6538)}),_N_E=e.O()}]);